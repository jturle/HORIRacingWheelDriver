#!/usr/bin/env python3
"""Quick HID descriptor analyzer"""

descriptor = bytes([
    0x05, 0x01, 0x09, 0x05, 0xA1, 0x01, 0x15, 0x00, 0x25, 0x01, 0x35, 0x00, 0x45, 0x01, 0x75, 0x01,
    0x95, 0x0D, 0x05, 0x09, 0x19, 0x01, 0x29, 0x0D, 0x81, 0x02, 0x95, 0x03, 0x81, 0x01, 0x05, 0x01,
    0x25, 0x07, 0x46, 0x3B, 0x01, 0x75, 0x04, 0x95, 0x01, 0x65, 0x14, 0x09, 0x39, 0x81, 0x42, 0x65,
    0x00, 0x95, 0x01, 0x81, 0x01, 0x26, 0xFF, 0x00, 0x46, 0xFF, 0x00, 0x09, 0x30, 0x09, 0x31, 0x09,
    0x32, 0x09, 0x35, 0x75, 0x08, 0x95, 0x04, 0x81, 0x02, 0x06, 0x00, 0xFF, 0x09, 0x20, 0x09, 0x21,
    0x09, 0x22, 0x09, 0x23, 0x09, 0x24, 0x09, 0x25, 0x09, 0x26, 0x09, 0x27, 0x09, 0x28, 0x09, 0x29,
    0x09, 0x2A, 0x09, 0x2B, 0x95, 0x0C, 0x81, 0x02, 0x0A, 0x21, 0x26, 0x95, 0x08, 0xB1, 0x02, 0xC0,
])

print("=" * 70)
print("HORI Racing Wheel - HID Report Structure Analysis")
print("=" * 70)
print()
print("Parsed HID Descriptor:")
print()
print("Usage Page: Generic Desktop (0x01)")
print("Usage: Game Pad (0x05)")
print("Collection: Application")
print()
print("Report Structure (Input):")
print("-" * 70)
print("Byte 0, bits 0-12:  13 Buttons (0x01-0x0D)")
print("Byte 0, bits 13-15: 3 bits padding")
print("Byte 2, bits 0-3:   Hat Switch/D-pad (8 positions, 0-7)")
print("Byte 2, bits 4-7:   4 bits padding")
print("Byte 3:             X axis (0-255) - STEERING WHEEL")
print("Byte 4:             Y axis (0-255) - ACCELERATOR")
print("Byte 5:             Z axis (0-255) - BRAKE")
print("Byte 6:             Rz axis (0-255) - CLUTCH/EXTRA")
print("Bytes 7-18:         12 vendor-specific bytes (unknown)")
print()
print("Total Input Report Size: ~19-24 bytes")
print()
print("=" * 70)
print("Report Layout Summary:")
print("=" * 70)
print()
print("  Byte 0-1: Buttons (13 buttons + 3 bits padding = 16 bits)")
print("  Byte 2:   D-pad (4 bits) + padding (4 bits)")
print("  Byte 3:   Steering wheel (0x00 = full left, 0xFF = full right)")
print("  Byte 4:   Accelerator pedal (0x00 = not pressed, 0xFF = full)")
print("  Byte 5:   Brake pedal (0x00 = not pressed, 0xFF = full)")
print("  Byte 6:   Clutch/Extra axis (0x00 = not pressed, 0xFF = full)")
print("  Byte 7-18: Vendor data (possibly force feedback or status)")
print()
print("Feature Report (Output):")
print("  8 bytes for vendor-specific feature 0x2621")
print()
